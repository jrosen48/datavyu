---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  message = FALSE
)
```

# datavyu

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/datavyu)](https://CRAN.R-project.org/package=datavyu)
[![Travis build status](https://travis-ci.com/jrosen48/datavyu.svg?branch=master)](https://travis-ci.com/jrosen48/datavyu)
<!-- badges: end -->

The goal of {datavyu} is to to  to facilitate the use of the open-source **datavyu** software for the analysis of qualitative audiovisual data

## Installation

You can install the development version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("jrosen48/datavyu")
```

The datavyu software must also be installed; see [here](https://datavyu.org/download.html)

## Use

```{r}
library(dplyr)
library(datavyur)
```

```{r, echo = FALSE}
devtools::load_all(".")
```

*note*: The use of this package requires the use of the **datavyu** software's [Ruby API](https://datavyu.org/user-guide/api.html); note that while **datavyu** has a graphical user interface, it is accompanied by a number of Ruby scripts.

1. . Run the following Ruby script within the datavyu software by selecting Script and then Run Script; select a directory with one or more `.opf` files:

`csv2opf.rb`

<!-- I ran this on the Empirical Analyses folder to generate a bunch of data -->

2. Open the directory that the Ruby script created; a number of CSV files for each `.opf` file should now be created.

This is the directory pass to the datavyu functions below.

# Grab all of the files for one code:

```{r}
# find_unique_values("ex-data/datavyu_output_07-06-2020_14-46", what = "codes")[1]

f <- datavyur::datavyu_col_search(folder = "ex-data/datavyu_output_07-06-2020_14-46") %>% as_tibble()

f$column %>% unique()
f$file %>% unique()
```

# Summarizing a column

```{r}
summarize_column(column = "LogClass_AS_ActivityFormat",
                directory = "ex-data/datavyu_output_07-06-2020_14-46")

summarize_column(column = "LogClass_AS_ActivityFormat",
                directory = "ex-data/datavyu_output_07-06-2020_14-46",
                by_file = TRUE)

summarize_column(column = "LogClass_AS_ActivityFormat",
                directory = "ex-data/datavyu_output_07-06-2020_14-46",
                by_file = TRUE,
                what = "duration")
```

# Plot the results of a summary of a column

```{r, eval = FALSE}
plot_frequencies
```

## Other package

This package extensively uses [{datavyur}](https://github.com/iamamutt/datavyu) for preparing the data for the summary statistic and plotting functions in this package. We do not intend to duplicate the functionality of that excellent package in ours; we focus instead on summarizing datavyu output and preparing the output for use in other analyses.
